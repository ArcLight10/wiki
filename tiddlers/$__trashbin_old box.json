{
    "title": "old box",
    "caption": "{{$:/xp/images/checklist}} old box",
    "color": "#bbb",
    "created": "20221101134242257",
    "creator": "A",
    "icon": "$:/xp/images/checklist",
    "modified": "20221101134649505",
    "modifier": "A",
    "tags": "TableOfContents",
    "tmap.id": "3b983820-1f44-4b29-b861-3ccfddf0750b",
    "type": "text/vnd.tiddlywiki",
    "text": "\\import $:/aggregation/macros/general\n\\define aggregationTag() Checklist\n\n\\whitespace trim\n\\define lingo-base() $:/language/Search/\n\\define storeTitle() $:/temp/search/checklist\n\\define cancel-search-actions() <$action-deletetiddler $filter=\"[<storeTitle>] [<modeTiddler>]\"/><$action-sendmessage $message=\"tm-focus-selector\" $param=\".xp-gtd-addtodo-textbox input\"/>\n\\define radioActions() <$action-sendmessage $message=\"tm-focus-selector\" $param=\".xp-search-checklist input\"/>\n\n\\define checklistCount()\n<small class=\"tc-sidebar-header\"><b><$count filter='[tag<aggregationTag>!tag[done]!has[draft.of]]'/></b> + <$count filter='[tag<aggregationTag>tag[done]!has[draft.of]]'/> = <$count filter='[tag<aggregationTag>!has[draft.of]]'/> tiddlers</small>\n\\end\n\n\\define newChecklist()\n<$vars storeTiddler=\"$:/temp/new-checklist/input\">\n  <div class=\"xp-gtd-addtodo\">\n  <div class=\"xp-gtd-addtodo-textbox\">\n    <$keyboard key=\"escape\" actions=<<cancel-input-actions>>>\n    <$keyboard key=\"enter\" actions=<<new-checklist-actions>>>\n      <$edit-text\n  tiddler=<<storeTiddler>>\n  tag=\"input\"\n  class=\"xp-gtd-addtodo-textbox-input\"\n  placeholder=\"new checklist...\"\n  default=\"\"\n  minHeight=\"1em\"\n  />\n    </$keyboard>\n    </$keyboard>\n  </div>\n\n  <$list filter=\"[<storeTiddler>get[text]trim[]!is[blank]]\" variable=\"ignore\" storyview=\"pop\">\n  <$button\n    class=\"tc-btn-invisible tc-tiny-gap-left\"\n    actions=<<new-checklist-actions>>\n    tooltip=\"Add new checklist\"\n    aria-label=\"new checklist\"\n  >\n    {{$:/core/images/new-button}}\n  </$button>\n  </$list>\n  </div>\n</$vars>\n\\end\n\n\\define get-tags() $(textFieldTags)$ $(tagsFieldTags)$\n\n\\define new-checklist-actions()\n<$vars\n  checklistTitleTemplate={{$:/config/NewChecklist/Title}}\n  textFieldTags={{$:/config/NewChecklist/Tags}}\n  tagsFieldTags={{$:/config/NewChecklist/Tags!!tags}}\n  checklistText={{$:/config/NewChecklist/Text}}>\n<$wikify name=\"checklistTitle\" text=\"<$macrocall $name='now' format=<<checklistTitleTemplate>>/>\">\n<$list filter=\"[<storeTiddler>get[text]trim[]!is[blank]]\" variable=\"ignore\">\n  <$action-createtiddler\n    $basetitle=<<checklistTitle>>\n    $savetitle=\"$:/temp/new-checklist/title\"\n    tags=<<get-tags>>\n    text=<<checklistText>>\n    caption={{{ [<storeTiddler>get[text]] }}}\n  />\n  <$action-setfield $tiddler=\"$:/temp/toc/selectedTiddler/checklist\" text={{$:/temp/new-checklist/title}}/>\n  <$action-deletefield $tiddler=<<storeTiddler>> text />\n  <$action-sendmessage $message=\"tm-auto-save-wiki\"/>\n</$list>\n</$wikify>\n</$vars>\n\\end\n\n\\define cancel-input-actions() <$action-deletefield $tiddler=<<storeTiddler>> text />\n\n\\define defaultView() $:/config/xp/aggregation-checklist/DefaultView\n\\define checklistViewButton()\n\\whitespace trim\n<$reveal state=<<defaultView>> default=\"toc\" type=\"nomatch\" text=\"list\">\n<$button tooltip=\"Switching to list view\" class=\"tc-btn-invisible tc-btn-mini\">\n<$action-setfield $tiddler=<<defaultView>> text=\"list\"/>\n{{$:/xp/images/switch}}\n</$button>\n</$reveal>\n<$reveal state=<<defaultView>> type=\"match\" text=\"list\">\n<$button tooltip=\"Switching to toc view\" class=\"tc-btn-invisible tc-btn-mini\">\n<$action-setfield $tiddler=<<defaultView>> text=\"toc\"/>\n{{$:/xp/images/switch}}\n</$button>\n</$reveal>\n\\end\n\n\\define modeTiddler() $:/state/xp/aggregation-checklist/Mode\n\\define searchButton()\n\\whitespace trim\n<$reveal state=<<modeTiddler>> type=\"match\" text=\"add\" default=\"add\">\n<$button set=<<modeTiddler>> setTo=\"search\" tooltip=\"Search checklist\" aria-label=\"search checklist\" class=\"tc-btn-invisible tc-btn-mini\">\n<span class=\"tc-btn-icon\">{{$:/core/images/advanced-search-button}}</span>\n</$button>\n</$reveal>\n<$reveal state=<<modeTiddler>> type=\"match\" text=\"search\" default=\"add\">\n<$set name=\"stateTiddler\" filter=\"[<storeTitle>has[text]]\" value=<<storeTitle>> emptyValue=<<doneTiddler>>>\n<$button set=<<modeTiddler>> setTo=\"add\" tooltip=\"Cancel search\" aria-label=\"cancel search\" class=\"tc-btn-invisible tc-btn-mini\">\n<span class=\"tc-btn-icon\">{{$:/core/images/advanced-search-button}}</span>\n<<cancel-search-actions>>\n</$button>\n</$set>\n</$reveal>\n\\end\n\n\\define checklistManagerView()\n<div class=\"xp-checklist-wrapper\">\n<div class=\"tc-manager-list\">\n  <$list filter=<<searchFilter>>>\n    <$vars transclusion=<<currentTiddler>>>\n      <div style=\"tc-manager-list-item\">\n  <$button popup=<<qualify \"$:/state/xp/aggregation-checklist\">> class=\"tc-btn-invisible tc-manager-list-item-heading xp-manager-item-heading\" selectedClass=\"tc-manager-list-item-heading-selected\">\n    {{||$:/xp/aggregation-checklist/Caption}}\n      <$list filter=\"[<currentTiddler>search:text:literal,casesensitive[<<checklist>>]]\" variable=\"ignore\">\n    {{||$:/xp/images/pie-kara}}\n      </$list>\n  </$button>\n  <$reveal state=<<qualify \"$:/state/xp/aggregation-checklist\">> type=\"nomatch\" text=\"\" default=\"\" tag=\"div\" class=\"tc-manager-list-item-content tc-popup-handle\">\n    <div class=\"xp-manager-item-content xp-manager-item-content-tiddler\">\n      <$transclude mode=\"block\"/>\n    </div>\n    <div class=\"xp-manager-item-content-sidebar\">\n      <div class=\"xp-manager-item-tools xp-checklist-item-tools\">\n        <$transclude tiddler=\"$:/xp/aggregation-checklist/SidebarTools\"/>\n      </div>\n    </div>\n  </$reveal>\n      </div>\n    </$vars>\n  </$list>\n</div>\n</div>\n\\end\n\n<div class=\"xp-search xp-float-right\">\n<i class=\"tc-small-gap\"/>\n<$reveal state=<<modeTiddler>> type=\"nomatch\" text=\"search\">\n<<checklistViewButton>>\n</$reveal>\n<<searchButton>>\n<<help-button-to \"$:/checklist-help\" \"Checklist Help\">>\n</div>\n\n<$reveal state=<<modeTiddler>> type=\"match\" text=\"add\" default=\"add\">\n\n<i class=\"tc-small-gap\"/><<checklistCount>>\n\n<<newChecklist>>\n\n<$list filter=\"[tag<aggregationTag>!has[draft.of]limit[1]]\" emptyMessage=\"{{$:/aggregation/prompt}}\" variable=\"ignore\">\n<$vars searchFilter=\"[tag<aggregationTag>!tag[done]!has[draft.of]!sort[created]]\">\n\n<!-- toc view -->\n<$reveal state=<<defaultView>> default=\"toc\" type=\"match\" text=\"toc\" animate=\"yes\">\n<$macrocall\n  $name=\"aggregation-toc\"\n  filter=<<searchFilter>>\n  template=\"$:/templates/checklist\"\n  selectedTiddler=\"$:/temp/toc/selectedTiddler/checklist\"\n  unselectedText=\"<p>Select a checklist.</p>\"\n  missingText=\"<p>Missing tiddler.</p>\"\n/>\n</$reveal>\n\n<!-- manager view -->\n<$reveal state=<<defaultView>> default=\"toc\" type=\"nomatch\" text=\"toc\" animate=\"yes\">\n<<checklistManagerView>>\n</$reveal>\n\n</$vars>\n</$list>\n\n</$reveal>\n\n<$reveal state=<<modeTiddler>> type=\"match\" text=\"search\" default=\"add\">\n<$list filter=\"[tag<aggregationTag>!has[draft.of]limit[1]]\" emptyMessage=\"{{$:/aggregation/prompt}}\" variable=\"ignore\">\n\nSearch <i class=\"tc-small-gap\"/>\n<$tiddler tiddler=\"$:/config/xp/aggregation-checklist/scope\">\n<$radio value=\"[all[current]]\" actions=<<radioActions>>> &#32; all </$radio><i class=\"tc-tiny-gap\"/>\n<$radio value=\"[!tag[done]]\" actions=<<radioActions>>> &#32; undone </$radio><i class=\"tc-tiny-gap\"/>\n<$radio value=\"[tag[done]]\" actions=<<radioActions>>> &#32; done </$radio>\n</$tiddler>\n\n<span class=\"xp-search xp-search-checklist\">\n<$keyboard key=\"escape\" actions=\"<$action-deletetiddler $filter=<<storeTitle>>/>\">\n<$edit-text tiddler=<<storeTitle>> tag=\"input\" focus=\"true\" placeholder=\"\" default=\"\"/>\n</$keyboard>\n<i class=\"tc-tiny-gap-left\"/>\n<$set name=\"stateTiddler\" filter=\"[<storeTitle>!is[missing]has[text]]\" value=<<storeTitle>> emptyValue=<<doneTiddler>>>\n<$reveal state=<<stateTiddler>> type=\"nomatch\" text=\"\" animate=\"yes\">\n<$button class=\"tc-btn-invisible\">\n<<cancel-search-actions>>\n{{$:/core/images/close-button}}\n</$button>\n</$reveal>\n</$set>\n</span>\n<$vars userInput={{{ [<storeTitle>get[text]] }}} searchFilter=\"[tag<aggregationTag>!has[draft.of]!sort[created]search:title,caption,text,tags<userInput>] :filter[subfilter{$:/config/xp/aggregation-checklist/scope}]\">\n<$wikify name=\"resultCount\" text=\"<$count filter=<<searchFilter>>/>\">\n<$reveal state=<<storeTitle>> type=\"nomatch\" text=\"\" animate=\"yes\">\n<span class=\"xp-search-results\"><<lingo System/Matches>></span>\n</$reveal>\n\n<div style=\"padding:1em 0;\">\n<<checklistManagerView>>\n</div>\n\n</$wikify>\n</$vars>\n\n</$list>\n</$reveal>",
    "revision": "0",
    "bag": "default"
}